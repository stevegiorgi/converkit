(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{10:function(e,s,t){"use strict";var a=t(3),r=t(6),i=t(8),n=t.n(i),o=(t(17),{}),c=t(2),l=Object(c.a)(o,(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("td",[t("v-row",[t("v-col",{attrs:{cols:"12"}},[t("v-combobox",{attrs:{items:e.tags,"item-text":function(e){return e.name},"item-value":function(e){return e.id},label:"Tags",multiple:"","small-chips":""},on:{change:function(s){return e.addSubscriberTag(e.subscribers,e.subscriber,e.subscribersTags[e.subscriber.ck_id])}},scopedSlots:e._u([{key:"selection",fn:function(s){return[t("v-chip",{key:s.item.id,attrs:{close:"","input-value":s.selected},on:{"click:close":function(t){return e.removeSubscriberTag(e.subscriber,s.item)}}},[e._v("\n            "+e._s(e.getItemText(s.item.id)))])]}}]),model:{value:e.subscribersTags[e.subscriber.ck_id],callback:function(s){e.$set(e.subscribersTags,e.subscriber.ck_id,s)},expression:"subscribersTags[subscriber.ck_id]"}})],1)],1)],1)}),[],!1,null,null,null).exports,u={name:"Snackbar",data:()=>({snackbar:{color:null,icon:null,mode:null,position:"top",text:null,timeout:7500,title:null,visible:!1},timeout:7500}),methods:{displaySnackbar(e){if(e.type)switch(e.type){case"error":this.snackbar={color:"error",icon:"error",mode:"multi-line",position:"top",timeout:7500,title:"Error",text:e.message||"There was a problem completing your request.",visible:!0};break;case"info":this.snackbar={color:"info",icon:"info",mode:"multi-line",position:"top",timeout:7500,title:"Info",text:e.message||"No information",visible:!0};break;case"success":this.snackbar={color:"success",icon:"check_circle",mode:"multi-line",position:"top",timeout:7500,title:"Success",text:e.message||"Your request was completed successfully.",visible:!0}}}},created(){r.bus.$on("displaySnackbar",(e=>{this.displaySnackbar(e)}))}},d=Object(c.a)(u,(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("v-snackbar",{attrs:{color:e.snackbar.color,"multi-line":"multi-line"===e.snackbar.mode,timeout:e.snackbar.timeout,bottom:"bottom"===e.snackbar.position,elevation:"24"},model:{value:e.snackbar.visible,callback:function(s){e.$set(e.snackbar,"visible",s)},expression:"snackbar.visible"}},[t("v-layout",{attrs:{"align-center":"","pr-4":""}},[t("v-icon",{staticClass:"pr-3",attrs:{dark:"",large:""}},[e._v(e._s(e.snackbar.icon))]),e._v(" "),t("v-layout",{attrs:{row:""}},[t("div",[t("strong",[e._v(e._s(e.snackbar.title))])]),e._v(" "),t("div",[e._v(e._s(e.snackbar.text))])])],1),e._v(" "),0===e.snackbar.timeout?t("v-btn",{attrs:{icon:""},on:{click:function(s){e.snackbar.visible=!1}}},[t("v-icon",[e._v("clear")])],1):e._e()],1)}),[],!1,null,null,null).exports,m={data:()=>({currentSubscriber:[],currentSubscriberTags:[],isLoading:!1,fullPage:!0,filterQuery:{queryName:"",queryEmail:"",queryTag:"",queryCourse:""},headers:[{text:"ID",value:"ck_id",width:"10%"},{text:"Name",value:"first_name",width:"10%"},{text:"Email",value:"email_address",width:"10%"},{text:"State",value:"state",width:"10%"},{text:"Tags",value:"tags",width:"35%"},{text:"Courses",value:"courses",width:"25%"}],sortBy:"first_name",sortDesc:!1,buttons:[{color:"info",title:"Infomation",type:"info"},{color:"success",title:"Success",type:"success"},{color:"error",title:"Error",type:"error"}],snackbar:{color:null,icon:null,mode:null,position:"top",text:null,timeout:7500,title:null,visible:!1},timeout:7500}),components:{Loading:n.a,Snackbar:d,Tags:l},computed:{...Object(a.b)({subscribers:"getSubscribers"}),...Object(a.b)({subscribersTags:"getSubscribersTags"}),...Object(a.b)({tags:"getTags"}),filteredSubscribers(){return this.filter(this.subscribers,this.filterQuery)}},filters:{displayAll:e=>"No Data"===e?"No course data available.":e.map((e=>e.course_title)).join(", ")},methods:{decodeHtml(e){var s=document.createElement("div");return s.innerHTML=e,s.childNodes[0].nodeValue},search(e,s){for(var t=0;t<s.length;t++)if(s[t].name===e)return s[t]},filter:(e,s)=>e.filter((e=>{const t=e.first_name.toLowerCase().includes(s.queryName.toLowerCase()),a=e.email_address.toLowerCase().includes(s.queryEmail.toLowerCase()),r=""===s.queryTag||null!==e.tags&&e.tags.find((e=>e.name.toLowerCase().replace(/[^a-zA-Z ]/g,"").includes(s.queryTag.toLowerCase().replace(/[^a-zA-Z ]/g,"")))),i=""===s.queryCourse||e.courses.constructor===Array&&e.courses.find((e=>e.course_title.toLowerCase().replace(/[^a-zA-Z ]/g,"").includes(s.queryCourse.toLowerCase().replace(/[^a-zA-Z ]/g,""))));return"Derek"===e.first_name&&console.log("Tags",e),t&&a&&r&&i})),searchName(e){this.filterQuery.queryName=e},searchEmail(e){this.filterQuery.queryEmail=e},searchTags(e){this.filterQuery.queryTag=e},searchCourses(e){this.filterQuery.queryCourse=e},compareObjects:(e,s)=>e.filter((({id:e})=>!s.some((({id:s})=>s===e)))),removeSubscriberTag(e,s){const t=e.ck_id,a=e.email_address,i=s.id,n=this.subscribersTags[t];this.removeSubscriberTagByEmail(a,i),this.subscribersTags[t].splice(n.findIndex((e=>e.id===i)),1),r.bus.$emit("displaySnackbar",{type:"success",message:`Successfully removed tag: ${s.name} from ${e.first_name}.`})},async addSubscriberTag(e,s){const t=e.email_address,a=this.compareObjects(s,e.tags),i=e.tags.length>0?a:s;i.length<=1?(this.addSubscriberTagByEmail(t,i[0].id),r.bus.$emit("displaySnackbar",{type:"success",message:`Successfully added tag: ${i[0].name} to ${e.first_name}.`})):(i.forEach((e=>{this.addSubscriberTagByEmail(t,e.id)})),r.bus.$emit("displaySnackbar",{type:"success",message:`Successfully added tags: ${i.map((e=>e.name)).join(", ")} to ${e.first_name}.`}))},displaySnackbar(e,s){r.bus.$emit("displaySnackbar",{type:e,message:s})},getItemText(e){const s=this.tags.find((s=>s.id===e));return s?this.decodeHtml(s.name):""},async addSubscriberTagByEmail(e,s){try{this.isLoading=!0;const t="1cddU-Wg7MSePN3JYZqa3G4pGs13I9fQfs1aLsEINbg",a=await axios.post(`https://api.convertkit.com/v3/tags/${s}/subscribe?email=${e}&api_secret=${t}`,{header:{"Content-Type":"application/json; charset=utf-8"}},{data:{api_secret:t,email:e}});console.log("Adding Tag Response:",a)}catch(e){console.log("Add Error: ",e)}finally{this.isLoading=!1}},async removeSubscriberTagByEmail(e,s){try{this.isLoading=!0;const t="1cddU-Wg7MSePN3JYZqa3G4pGs13I9fQfs1aLsEINbg",a=await axios.post(`https://api.convertkit.com/v3/tags/${s}/unsubscribe?email=${e}&api_secret=${t}`);console.log("Removing tag Response: ",a)}catch(e){console.log("Delete Error: ",e)}finally{this.isLoading=!1}}},created(){this.$store.dispatch("getSubscribers"),this.$store.dispatch("getTags")}},b=(t(159),Object(c.a)(m,(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{attrs:{"data-vuetify":""}},[t("v-app",[t("v-main",[t("div",{attrs:{id:"vue-admin-app","data-app":""}},[t("v-container",{attrs:{fluid:""}},[t("h1",[e._v("ConvertKit Tag Manager")]),e._v(" "),t("p",[e._v("Manage ConvertKit tags for existing subscribers.")]),e._v(" "),t("v-data-table",{staticClass:"elevation-1 pa-6",attrs:{headers:e.headers,items:e.filteredSubscribers,"items-per-page":50,"footer-props":{showFirstLastPage:!0,"items-per-page-text":"Users per page","items-per-page-options":[10,25,50,100,-1]},"item-key":"ck_id",filled:"",chips:"",multiple:"","multi-sort":""},scopedSlots:e._u([{key:"top",fn:function(){return[t("v-row",{staticClass:"search-fields"},[t("v-col",{attrs:{cols:"12",md:"3"}},[t("v-text-field",{staticClass:"mx-4",attrs:{"append-icon":"search",label:"Search subscribers","single-line":""},on:{change:e.searchName}})],1),e._v(" "),t("v-col",{attrs:{cols:"12",md:"3"}},[t("v-text-field",{staticClass:"mx-4",attrs:{"append-icon":"search",label:"Search email","single-line":""},on:{change:e.searchEmail}})],1),e._v(" "),t("v-col",{attrs:{cols:"12",md:"3"}},[t("v-text-field",{staticClass:"mx-4",attrs:{"append-icon":"search",label:"Search tags","single-line":""},on:{change:e.searchTags}})],1),e._v(" "),t("v-col",{attrs:{cols:"12",md:"3"}},[t("v-text-field",{staticClass:"mx-4",attrs:{"append-icon":"search",label:"Search courses","single-line":""},on:{change:e.searchCourses}})],1)],1)]},proxy:!0},{key:"items",fn:function(s){return[t("td",[e._v(e._s(s.ck_id))]),e._v(" "),t("td",[e._v(e._s(s.first_name))]),e._v(" "),t("td",[e._v(e._s(s.email_address))]),e._v(" "),t("td",[e._v(e._s(s.state))])]}},{key:"item.tags",fn:function(s){var a=s.item;return[t("td",[t("v-row",[t("v-col",{attrs:{cols:"12"}},[t("v-combobox",{attrs:{items:e.tags,"item-text":function(s){return e.decodeHtml(s.name)},"item-value":function(e){return e.id},label:"Tags",multiple:"","small-chips":""},on:{change:function(s){return e.addSubscriberTag(a,a.tags)}},scopedSlots:e._u([{key:"selection",fn:function(s){return[t("v-chip",{key:s.item.id,attrs:{close:"","input-value":s.selected},on:{"click:close":function(t){return e.removeSubscriberTag(a,s.item)}}},[e._v("\n                            "+e._s(e.getItemText(s.item.id)))])]}}],null,!0),model:{value:a.tags,callback:function(s){e.$set(a,"tags",s)},expression:"item.tags"}})],1)],1)],1)]}},{key:"item.courses",fn:function(s){var a=s.item;return[t("td",{domProps:{innerHTML:e._s(e.$options.filters.displayAll(a.courses))}})]}}])})],1)],1),e._v(" "),t("Snackbar")],1)],1)],1)}),[],!1,null,null,null));s.a=b.exports},156:function(e,s,t){"use strict";(function(e){var s=t(1),a=t(12),r=t.n(a);const i=e.from("steve@dotekimedia.com:fxGW yIqW 4GSt 30Oj sQo5 Wtjt","utf8").toString("base64");r.a.defaults.headers.common.Authorization=`Basic ${i}`;const n=r.a.create({baseURL:"https://samesidesellingacademy.com/wp-json/"});n.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),n.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),Plugin.install=function(e){e.axios=n,window.axios=n,Object.defineProperties(e.prototype,{axios:{get:()=>n},$axios:{get:()=>n}})},s.default.use(Plugin);Plugin}).call(this,t(157).Buffer)},159:function(e,s,t){"use strict";t(18)},160:function(e,s,t){(s=t(15)(!1)).push([e.i,"h1{font-size:30px !important;font-weight:700 !important}p{font-size:18px !important}th span{font-size:18px !important;font-weight:700 !important}input{box-shadow:none !important;border-radius:unset !important;border:none !important;background-color:inherit !important;color:inherit !important}",""]),e.exports=s},171:function(e,s,t){var a={"./af":21,"./af.js":21,"./ar":22,"./ar-dz":23,"./ar-dz.js":23,"./ar-kw":24,"./ar-kw.js":24,"./ar-ly":25,"./ar-ly.js":25,"./ar-ma":26,"./ar-ma.js":26,"./ar-sa":27,"./ar-sa.js":27,"./ar-tn":28,"./ar-tn.js":28,"./ar.js":22,"./az":29,"./az.js":29,"./be":30,"./be.js":30,"./bg":31,"./bg.js":31,"./bm":32,"./bm.js":32,"./bn":33,"./bn-bd":34,"./bn-bd.js":34,"./bn.js":33,"./bo":35,"./bo.js":35,"./br":36,"./br.js":36,"./bs":37,"./bs.js":37,"./ca":38,"./ca.js":38,"./cs":39,"./cs.js":39,"./cv":40,"./cv.js":40,"./cy":41,"./cy.js":41,"./da":42,"./da.js":42,"./de":43,"./de-at":44,"./de-at.js":44,"./de-ch":45,"./de-ch.js":45,"./de.js":43,"./dv":46,"./dv.js":46,"./el":47,"./el.js":47,"./en-au":48,"./en-au.js":48,"./en-ca":49,"./en-ca.js":49,"./en-gb":50,"./en-gb.js":50,"./en-ie":51,"./en-ie.js":51,"./en-il":52,"./en-il.js":52,"./en-in":53,"./en-in.js":53,"./en-nz":54,"./en-nz.js":54,"./en-sg":55,"./en-sg.js":55,"./eo":56,"./eo.js":56,"./es":57,"./es-do":58,"./es-do.js":58,"./es-mx":59,"./es-mx.js":59,"./es-us":60,"./es-us.js":60,"./es.js":57,"./et":61,"./et.js":61,"./eu":62,"./eu.js":62,"./fa":63,"./fa.js":63,"./fi":64,"./fi.js":64,"./fil":65,"./fil.js":65,"./fo":66,"./fo.js":66,"./fr":67,"./fr-ca":68,"./fr-ca.js":68,"./fr-ch":69,"./fr-ch.js":69,"./fr.js":67,"./fy":70,"./fy.js":70,"./ga":71,"./ga.js":71,"./gd":72,"./gd.js":72,"./gl":73,"./gl.js":73,"./gom-deva":74,"./gom-deva.js":74,"./gom-latn":75,"./gom-latn.js":75,"./gu":76,"./gu.js":76,"./he":77,"./he.js":77,"./hi":78,"./hi.js":78,"./hr":79,"./hr.js":79,"./hu":80,"./hu.js":80,"./hy-am":81,"./hy-am.js":81,"./id":82,"./id.js":82,"./is":83,"./is.js":83,"./it":84,"./it-ch":85,"./it-ch.js":85,"./it.js":84,"./ja":86,"./ja.js":86,"./jv":87,"./jv.js":87,"./ka":88,"./ka.js":88,"./kk":89,"./kk.js":89,"./km":90,"./km.js":90,"./kn":91,"./kn.js":91,"./ko":92,"./ko.js":92,"./ku":93,"./ku.js":93,"./ky":94,"./ky.js":94,"./lb":95,"./lb.js":95,"./lo":96,"./lo.js":96,"./lt":97,"./lt.js":97,"./lv":98,"./lv.js":98,"./me":99,"./me.js":99,"./mi":100,"./mi.js":100,"./mk":101,"./mk.js":101,"./ml":102,"./ml.js":102,"./mn":103,"./mn.js":103,"./mr":104,"./mr.js":104,"./ms":105,"./ms-my":106,"./ms-my.js":106,"./ms.js":105,"./mt":107,"./mt.js":107,"./my":108,"./my.js":108,"./nb":109,"./nb.js":109,"./ne":110,"./ne.js":110,"./nl":111,"./nl-be":112,"./nl-be.js":112,"./nl.js":111,"./nn":113,"./nn.js":113,"./oc-lnc":114,"./oc-lnc.js":114,"./pa-in":115,"./pa-in.js":115,"./pl":116,"./pl.js":116,"./pt":117,"./pt-br":118,"./pt-br.js":118,"./pt.js":117,"./ro":119,"./ro.js":119,"./ru":120,"./ru.js":120,"./sd":121,"./sd.js":121,"./se":122,"./se.js":122,"./si":123,"./si.js":123,"./sk":124,"./sk.js":124,"./sl":125,"./sl.js":125,"./sq":126,"./sq.js":126,"./sr":127,"./sr-cyrl":128,"./sr-cyrl.js":128,"./sr.js":127,"./ss":129,"./ss.js":129,"./sv":130,"./sv.js":130,"./sw":131,"./sw.js":131,"./ta":132,"./ta.js":132,"./te":133,"./te.js":133,"./tet":134,"./tet.js":134,"./tg":135,"./tg.js":135,"./th":136,"./th.js":136,"./tk":137,"./tk.js":137,"./tl-ph":138,"./tl-ph.js":138,"./tlh":139,"./tlh.js":139,"./tr":140,"./tr.js":140,"./tzl":141,"./tzl.js":141,"./tzm":142,"./tzm-latn":143,"./tzm-latn.js":143,"./tzm.js":142,"./ug-cn":144,"./ug-cn.js":144,"./uk":145,"./uk.js":145,"./ur":146,"./ur.js":146,"./uz":147,"./uz-latn":148,"./uz-latn.js":148,"./uz.js":147,"./vi":149,"./vi.js":149,"./x-pseudo":150,"./x-pseudo.js":150,"./yo":151,"./yo.js":151,"./zh-cn":152,"./zh-cn.js":152,"./zh-hk":153,"./zh-hk.js":153,"./zh-mo":154,"./zh-mo.js":154,"./zh-tw":155,"./zh-tw.js":155};function r(e){var s=i(e);return t(s)}function i(e){if(!t.o(a,e)){var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=171},18:function(e,s,t){var a=t(160);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,t(16).default)("a33d8a48",a,!0,{})},6:function(e,s,t){"use strict";t.r(s),t.d(s,"bus",(function(){return S}));var a=t(1),r=t(10),i=t(11),n={name:"ConvertKit",data:()=>({msg:"Test"})},o=t(2),c=Object(o.a)(n,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"home"})}),[],!1,null,"0b07e69f",null).exports,l={name:"Settings",data:()=>({})},u=Object(o.a)(l,(function(){var e=this,s=e.$createElement;return(e._self._c||s)("div",{staticClass:"app-settings"},[e._v("\n  Dashboard Settings\n")])}),[],!1,null,"42ed48e0",null).exports;a.default.use(i.a);var d=new i.a({routes:[{path:"/",name:"Home",component:c},{path:"/settings",name:"Settings",component:u}]}),m=(t(156),t(3)),b=t(9);t(0),t(19);let p=new Date,g=String(p.getDate()).padStart(2,"0"),f=String(p.getMonth()+1).padStart(2,"0"),j=p.getFullYear();p=j+"-"+f+"-"+g,a.default.use(m.a);var h=new m.a.Store({state:{subscribers:[],subscribers_tags:[],tags:[]},mutations:{updateField:b.c,SET_SUBSCRIBERS(e,s){e.subscribers=s},SET_SUBSCRIBERS_TAGS(e,s){e.subscribers_tags=s},SET_TAGS(e,s){e.tags=s}},actions:{async getSubscribers({commit:e}){const s=await axios.get("ldd/v2/ck-users?get_all=true");console.log("All Subscriber Data",s),e("SET_SUBSCRIBERS",s.data)},async getTags({commit:e}){e("SET_TAGS",(await axios.get("https://api.convertkit.com/v3/tags?api_key=8xjZlAPwIpU62U7SQjjS-Q")).data.tags)}},getters:{getField:b.a,getSubscribers:e=>e.subscribers,getSubscribersTags:e=>e.subscribers_tags,getTags:e=>e.tags}});var v=function(e){var s=jQuery;let t=s("#toplevel_page_"+e),a=window.location.href,r=a.substr(a.indexOf("admin.php"));t.on("click","a",(function(){var e=s(this);s("ul.wp-submenu li",t).removeClass("current"),e.hasClass("wp-has-submenu")?s("li.wp-first-item",t).addClass("current"):e.parents("li").addClass("current")})),s("ul.wp-submenu a",t).each((function(e,t){s(t).attr("href")!==r||s(t).parent().addClass("current")}))},y=t(13),k=t.n(y);t(172),t(173);a.default.use(k.a);var _=new k.a({defaultAssets:{font:!0,icons:"mdi"},icons:{iconfont:"mdi"},theme:{dark:!1,themes:{dark:{primary:"#000",secondary:"#fff",background:"#000",accent:"#cb080f",error:"#cb080f"},light:{primary:"#000",secondary:"#000",background:"#fff",accent:"#cb080f",error:"#cb080f"}}}});const S=new a.default;a.default.config.productionTip=!1,new a.default({el:"#vue-admin-app",vuetify:_,router:d,store:h,render:e=>e(r.a)}),v("vue-app")}},[[6,0,1]]]);